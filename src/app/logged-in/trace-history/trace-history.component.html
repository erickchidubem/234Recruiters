  <!-- start page title -->
  <div class="row">
    <div class="col-12">
        <div class="page-title-box">
            <div class="page-title-right">
                <form class="form-inline">
                    <div class="form-group">
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control border-0 shadow" id="dash-daterange">
                            <div class="input-group-append">
                                <span class="input-group-text bg-blue border-blue text-white">
                                    <i class="mdi mdi-calendar-range"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                    <a href="javascript: void(0);" class="btn btn-blue btn-sm ml-2">
                        <i class="mdi mdi-autorenew"></i>
                    </a>
                    <a href="javascript: void(0);" class="btn btn-blue btn-sm ml-1">
                        <i class="mdi mdi-filter-variant"></i>
                    </a>
                </form>
            </div>
            <h4 class="page-title">NCDC Contact Tracing</h4>
        </div>
    </div>
</div>     
<!-- end page title --> 

<div class="row">
    <div class="col-12">
        <div class="card-box">
            <button type="button" (click)="openModal()" class="btn btn-sm btn-danger waves-effect waves-light float-right" data-toggle="modal" data-target="#custommodal">
                <i class="mdi mdi-plus-circle"></i> Activate New Trace </button>
                
            <table class="table table table-nowrap table-hover mb-0 table-responsive">
                        <thead>
                            <tr>
                                <th width="10%">Entity</th>
                                <th width="45%">Exposed Location</th>
                                <th width="15%">Date Exposed</th>
                                <th width="10%">Status</th>
                                <th width="20%">Contacts Traced</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let c of allTraceSummary">
                                <td class="table-user">
                                    <!-- <img src="../assets/images/filmhouse.jpg" alt="table-user" class="mr-2 rounded-circle">
                                    <a href="javascript:void(0);" class="text-body font-weight-normal"></a> -->
                                    {{c.entityName}}
                                </td>
                                <td><a href="{{c.address_url}}" target="_blank">{{c.formatted_address}}</a></td>
                                <td>{{c.DateToTrace | date:'dd/MM/yyyy'}}</td>
                                <td><span class="badge bg-soft-success text-success">Traced</span></td>
                                <td> <a routerLink="/access/contact-traced/{{c.entityName}}/{{c.entityName}}/{{c.id}}"> {{c.contact_counts}}</a></td>
                            </tr>
                            
                        </tbody>
                    </table>
        </div>
    </div><!-- end col -->
</div>
<!-- end row-->

<div class="modal fade" id="custommodal"  role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-light">
                <h4 class="modal-title" id="myCenterModalLabel">New Contact Trace</h4>
                <button type="button" class="close" (click)="closeModal()" data-dismiss="modal" aria-hidden="true">Ã—</button>
            </div>
            <div class="modal-body p-4">
                <form [formGroup]="form" (ngSubmit)="submit()">
                    
                    <div class="form-group">
                                        <label class="mb-1 font-weight-bold text-muted">Entity Name</label>

                                        <ng-select2 [data]="allEntities"
                                        (valueChanged)="getLocationsFromEntities($event)"
                                        (ngModelChange)="getLocationsFromEntities($event)"
                                        [width]="300"
                                       
                                        [placeholder]="'All Entities'"
                                        
                                        ></ng-select2>
                                       
                                    </div>
                    
                    <div class="form-group">
                        <label for="location">Enter Location</label>
                        <ng-select2 [data]="entitiesLocation"
                                        (valueChanged)="selectLocation($event)"
                                        (ngModelChange)="selectLocation($event)"
                                        [width]="300"
                                       
                                        [placeholder]="'Entity Location'"
                                        
                                        ></ng-select2>
                    </div>
                    <div class="form-group mb-3">
                                                <label for="example-date">Date</label>
                                                <input class="form-control" id="example-date" formControlName="DateToTrace" [ngClass]="{'is-invalid':submitted && f.DateToTrace.errors}" (change)="onDateSelect($event)" type="date">
                                                <div *ngIf="submitted && f.DateToTrace.errors" class="invalid-feedback">
                                                    <div *ngIf="f.DateToTrace.errors.required">this field is required</div>
                                                 </div>
                                            </div>
                    

                    <div class="text-right" *ngIf="buttonShow">
                        <button class="btn btn-success waves-effect waves-light">Trace <span class="text-danger">{{buttonCountValue}}</span> Contact(s)</button>
                        <!-- <button type="button" class="btn btn-danger waves-effect waves-light m-l-10" onclick="Custombox.close();">Cancel</button> -->
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>